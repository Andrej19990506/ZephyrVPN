# Redis Sentinel Configuration
# Этот файл копируется в /data/sentinel.conf при старте контейнера
# Sentinel может обновлять /data/sentinel.conf при обнаружении изменений

# Порт, на котором работает Sentinel
port 26379

# Имя мастера и его адрес
# Формат: sentinel monitor <master-name> <ip> <port> <quorum>
# quorum = 2 означает, что нужно 2 голоса Sentinel для принятия решения о failover
sentinel monitor mymaster redis-master 6379 2

# Время в миллисекундах, после которого Sentinel считает мастера недоступным
# Если мастер не отвечает 5 секунд, он считается "down"
sentinel down-after-milliseconds mymaster 5000

# Таймаут failover в миллисекундах
# Если failover не завершится за 60 секунд, он считается неудачным
sentinel failover-timeout mymaster 60000

# Количество реплик, которые могут синхронизироваться с новым мастером одновременно
# 1 = безопаснее, но медленнее
sentinel parallel-syncs mymaster 1

# Логирование
loglevel notice

# Защита от случайных перезаписей конфигурации
sentinel deny-scripts-reconfig yes

# Дополнительные настройки для стабильности
sentinel resolve-hostnames yes
sentinel announce-hostnames yes

# Указываем путь к конфигурационному файлу, который Sentinel может обновлять
# (будет переопределен при копировании в /data/sentinel.conf)

